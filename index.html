<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Totem - Promo√ß√µes Supermercado / Copa Sabor</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;800&display=swap" rel="stylesheet">
  <!-- √çcones do Font Awesome para o ambiente Game -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMDJj3c7YmR19dJ/Fz4mBw6T8qH8xQdY7pI4V0Xw5E3x2j/n15C5A8X2L5g8fA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    :root{
      --bg1: #071126;
      --bg2: #0f2440;
      --glass: rgba(255,255,255,0.06);
      --accent1: #ffb86b; /* Amarelo/Laranja */
      --accent2: #7ee7c0; /* Verde/Ciano */
      --muted: #c7d2fe;
      --button-bg: #4f46e5; /* Cor prim√°ria (Indigo) */
      --secondary-button-bg: #374151; /* Cinza para o bot√£o de cadastro/sair */
      --reward-bg: #eab308; /* Amarelo/Ouro para recompensa */
      --redeem-button: #eab308; /* Cor para resgate */
      --redeem-success: #10b981; /* Cor para sucesso de resgate */
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    /* Totem card: Ocupa a tela inteira */
    .totem {
      width: 98vw; /* Largura m√°xima */
      height: 98vh; /* Altura m√°xima */
      border-radius: 20px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      box-shadow: 0 20px 60px rgba(2,6,23,0.6);
      padding: 28px;
      position: relative;
      overflow: hidden;
      display: flex; 
      align-items: stretch;
      justify-content:center;
      border: 1px solid rgba(255,255,255,0.03);
      transition: transform .3s ease;
    }
    .totem:hover{ transform: translateY(-6px) }

    /* √Årea visual principal */
    .visual {
      position: relative;
      border-radius: 16px;
      padding: 28px;
      overflow: hidden;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      width: 100%; 
      background: none; 
    }

    .header-bar {
        position: absolute;
        top: 28px;
        left: 28px;
        right: 28px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 10;
    }

    .logo {
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo .mark{
      width:46px;height:46px;border-radius:10px;
      background: linear-gradient(135deg,var(--accent2),var(--accent1));
      display:flex;align-items:center;justify-content:center;
      font-weight:700;color:#05202a;font-size:18px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }
    .logo .text{
      font-weight:700;font-size:20px;color:var(--muted);
      letter-spacing:0.2px;
    }

    /* Cont√™iner de conte√∫do (para gerenciar os 4 estados principais: Produtos, QR Full, Dashboard) */
    .content-area {
        position: relative;
        width: 100%;
        height: 100%;
    }

    /* Estilos de Transi√ß√£o (Ajuste de 0.4s) */
    .content-area > div {
        transition: opacity 400ms cubic-bezier(.2,.9,.2,1), transform 400ms cubic-bezier(.2,.9,.2,1);
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transform: translateY(15px);
        pointer-events: none;
    }

    .content-area > div.active {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
    }

    /* Product card */
    .product {
      width: 100%;
      height: 100%;
      gap: 40px; 
      align-items:center;
      justify-content:center;
      padding: 40px; 
      text-align:left;
      margin: auto;
      max-width: 1200px; 
      display: flex; 
    }

    .product .imgwrap{
      width: 50%; 
      height: 500px; 
      border-radius:16px; 
      overflow:hidden;
      flex-shrink: 0;
      box-shadow: 0 18px 50px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      display:flex;align-items:center;justify-content:center;
    }
    .product .imgwrap img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transition: transform 600ms ease;
    }
    .product.active .imgwrap img{ 
      transform: scale(1.02); 
    }

    .product .meta{
      width: 50%; 
      color: #e6eef8;
      display:flex;
      flex-direction:column;
      gap:10px;
      padding-right:6px;
    }
    .meta .tag{
      display:inline-block;
      padding:8px 16px;
      border-radius:999px;
      font-weight:600;
      background: linear-gradient(90deg, rgba(255,184,107,0.12), rgba(126,231,192,0.06));
      color:var(--accent2);
      font-size:16px;
      letter-spacing:0.3px;
      width:max-content;
      margin-bottom: 10px;
    }
    .meta h2{
      font-size:48px; 
      font-weight:800;
      color: white;
      line-height: 1.1;
      margin-top:6px; 
      margin-bottom: 20px; 
    }
    .meta p.desc{
      color: #c8d6ee;
      opacity:0.92;
      margin-top:15px;
      font-size:20px; 
      line-height:1.4; 
    }
    .meta .price {
      margin-top:auto;
      display:flex;
      align-items:baseline; 
      gap:15px; 
    }
    .price .new{
      font-size:72px; 
      font-weight:800;
      background: linear-gradient(90deg,#ffd39f,#ffd68f);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      line-height: 1;
    }
    .price .currency{
        font-size: 36px; 
        font-weight: 500;
        color: var(--accent1);
    }
    .price .old{
      text-decoration:line-through;
      color:rgba(255,255,255,0.35);
      font-weight:600;
      font-size:22px; 
    }

    /* QR full area */
    .qr-card{
      min-height:380px;
      padding:40px; 
      border-radius:14px; 
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    }

    .qr-wrap{
      display:flex;
      flex-direction:column;
      gap:25px; 
      align-items:center;
      text-align:center;
    }
    .qr-wrap img{
      width:280px;height:280px;border-radius:16px; background:white; padding:12px; 
      box-shadow: 0 14px 40px rgba(2,6,23,0.6);
      transition: transform 300ms ease;
    }
    .qr-wrap .qr-title{ font-weight:800; color:var(--muted); font-size: 36px; } 
    .qr-wrap .qr-sub{ color:#cfe8ff; opacity:0.95; font-size:20px; } 

    /* Estilo de Bot√£o (Prim√°rio) */
    .action-button {
      padding: 14px 40px; 
      border-radius: 12px;
      font-weight: 700;
      font-size: 22px;
      cursor: pointer;
      border: none;
      transition: all 300ms ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    .primary-button {
        background: var(--button-bg);
        color: white;
    }
    .primary-button:hover {
        background: #6366f1;
        transform: translateY(-2px);
    }
    .secondary-button {
        background: var(--secondary-button-bg);
        color: var(--muted);
    }
    .secondary-button:hover {
        background: #4b5563;
    }

    /* ESTILOS DO MODAL */
    .modal-overlay {
        position: fixed; 
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.75); 
        display: none; 
        align-items: center;
        justify-content: center;
        z-index: 100; 
        opacity: 0;
        transition: opacity 300ms ease;
    }

    .modal-overlay.active {
        display: flex; 
        opacity: 1;
    }

    .modal-content {
      width: 500px; 
      background: var(--bg2); 
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      transform: translateY(20px);
      transition: transform 300ms ease;
    }
    
    .modal-overlay.active .modal-content {
        transform: translateY(0);
    }

    input[type="text"], input[type="password"] {
      padding: 16px; 
      font-size: 20px; 
      width: 100%;
      margin-bottom: 20px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.1);
      background: var(--bg1);
      color: white;
      outline: none;
    }

    /* --- Game Dashboard Styles (MELHORADO COM ABAS) --- */
    #game-dashboard {
        flex-direction: column;
        max-width: 1400px; 
        width: 90%;
        align-items: flex-start; /* Alinha o conte√∫do √† esquerda */
        padding: 0; 
    }
    
    .dashboard-tabs {
        display: flex;
        width: 100%;
        background: none; /* Removido fundo para usar apenas o estilo do bot√£o */
        padding: 20px 40px 0 40px; /* Adiciona espa√ßo vertical */
        box-shadow: none;
    }
    .tab-button {
        padding: 15px 30px;
        font-size: 20px;
        font-weight: 600;
        cursor: pointer;
        /* Estilo base (inativo) - Copia secondary-button, mas remove bordas */
        background: var(--secondary-button-bg);
        color: var(--muted); 
        border: none;
        border-radius: 12px;
        margin-right: 15px;
        transition: all 200ms ease;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transform: translateY(0); /* Reseta a transforma√ß√£o de hover para o estado base */
    }

    /* Ajuste de hover para os bot√µes de aba inativos (como o bot√£o Sair) */
    .tab-button:not(.active):hover {
        background: #4b5563; /* Cor de hover do secondary-button */
        color: white;
        transform: translateY(-2px); /* Efeito de hover */
    }

    .tab-button.active {
        /* Estilo da aba ativa */
        color: var(--accent2);
        background: var(--bg2); /* Fundo da Aba Ativa (para transi√ß√£o visual) */
        border-bottom: 3px solid var(--accent2);
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        box-shadow: none; /* Remove a sombra do bot√£o ativo */
        transform: translateY(0); /* Garante que n√£o suba */
    }
    
    /* Corre√ß√£o para alinhar visualmente o conte√∫do de aba ativa */
    .tab-content-wrapper {
        width: 100%;
        background: var(--bg2);
        padding: 40px;
        border-radius: 16px; 
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        flex-grow: 1;
        margin-top: -10px; /* Puxa para cima para cobrir o espa√ßo */
    }
    
    .tab-content {
        display: none;
    }
    .tab-content.active {
        display: grid;
    }
    
    /* Layouts internos das abas */
    #tab-profile-content {
        grid-template-columns: 1.5fr 1fr; /* Perfil + Ranking */
        gap: 40px;
        align-items: stretch;
    }
    
    .user-profile {
        padding: 30px; 
        border-radius: 16px;
        background: var(--bg1);
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
    }
    
    /* Layout Pr√™mios (Aprimorado) */
    #tab-rewards-content {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
    }
    .reward-item {
        background: var(--bg1);
        border-radius: 12px;
        padding: 25px; /* Mais padding */
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3); /* Sombra mais profunda */
        border: 1px solid rgba(255,255,255,0.05);
    }
    .reward-icon-box {
        background: var(--bg2);
        padding: 15px;
        border-radius: 50%;
        margin-bottom: 15px;
        box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    }
    .reward-item i {
        font-size: 45px;
        color: var(--accent2); /* Cor de destaque */
    }
    .reward-item h4 {
        font-size: 24px;
        font-weight: 700;
        color: var(--accent2); /* T√≠tulo em destaque */
        margin: 10px 0 5px;
    }
    .reward-item p {
        color: var(--muted);
        font-size: 16px;
        flex-grow: 1;
        margin-bottom: 15px;
    }
    .reward-cost {
        font-size: 28px; /* Maior destaque */
        font-weight: 800;
        color: var(--redeem-button);
        margin: 15px 0 20px;
        padding: 5px 10px;
        border-radius: 5px;
        background: rgba(255, 184, 107, 0.1);
    }
    .reward-item .redeem-btn {
        background: var(--redeem-button);
        color: var(--bg1);
        font-size: 18px;
        padding: 12px 25px; /* Bot√£o maior */
        border-radius: 8px;
        font-weight: 700;
        transition: all 200ms ease;
    }
    .reward-item .redeem-btn:hover:not(.disabled) {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(234, 179, 8, 0.6);
    }
    .reward-item .redeem-btn.disabled {
        background: var(--secondary-button-bg);
        color: #999;
        cursor: not-allowed;
        box-shadow: none;
    }

    /* Elementos do Dashboard */
    .profile-icon {
        font-size: 80px;
        color: var(--accent2);
        margin-bottom: 20px;
    }

    .points-display {
        font-size: 5rem; 
        font-weight: 800;
        color: var(--accent1);
        line-height: 1;
        margin: 10px 0 20px;
        padding: 10px 20px;
        border-radius: 12px;
        background: rgba(255, 184, 107, 0.15); 
    }
    
    .reward-card {
        font-size: 20px; 
        background: linear-gradient(90deg, #eab308, #f59e0b);
        color: #1a202c;
        padding: 15px 25px;
        border-radius: 10px;
        font-weight: 700;
        text-align: center;
        box-shadow: 0 4px 15px rgba(234, 179, 8, 0.4);
        margin-top: 30px;
    }
    
    .play-button {
        font-size: 30px; 
        padding: 20px 40px; 
        margin-top: auto; 
    }
    
    .ranking-card {
        padding: 30px; 
        border-radius: 16px;
        background: var(--bg1);
    }
    
    .ranking-list {
        list-style: none;
        padding: 0;
    }
    .ranking-item {
        display: flex;
        justify-content: space-between;
        padding: 12px 10px;
        border-bottom: 1px solid rgba(255,255,255,0.05);
        font-size: 18px;
        transition: background 200ms ease;
    }
    .ranking-item:last-child {
        border-bottom: none;
    }
    .ranking-item.is-user {
        font-weight: 700;
        color: var(--accent1);
        background: rgba(255, 184, 107, 0.08);
        border-radius: 8px;
    }
    .ranking-item span:first-child {
        color: var(--muted);
    }

    /* --- Quiz Game Styles --- */
    /* (Estilos do Quiz Game permanecem os mesmos) */
    #quiz-game {
        max-width: 1200px;
        display: grid;
        grid-template-rows: auto 1fr auto;
        gap: 30px;
        padding: 40px;
    }
    .quiz-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 20px;
        font-weight: 600;
        padding-bottom: 10px;
        border-bottom: 2px solid var(--accent2);
    }
    .quiz-question-area h3 {
        font-size: 3rem;
        font-weight: 800;
        margin-bottom: 40px;
        line-height: 1.2;
        text-align: center;
        color: white;
    }
    .quiz-options-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }
    .option-button {
        background: var(--secondary-button-bg);
        color: white;
        padding: 25px;
        border-radius: 16px;
        font-size: 22px;
        font-weight: 600;
        text-align: left; 
        cursor: pointer;
        transition: all 300ms ease;
        border: 2px solid transparent;
        display: flex; 
        align-items: center;
    }
    .option-button:hover {
        background: #4b5563;
        transform: translateY(-2px);
        border-color: var(--accent1);
    }
    .option-prefix {
        font-weight: 800;
        color: var(--accent2);
        margin-right: 15px;
        flex-shrink: 0;
        width: 30px;
    }
    .option-button.correct-answer {
        background: #10b981; 
        pointer-events: none;
        animation: pulse-correct 1s 1;
    }
    .option-button.incorrect-answer {
        background: #ef4444; 
        pointer-events: none;
    }
    .quiz-feedback {
        text-align: center;
        font-size: 24px;
        font-weight: 700;
        color: var(--accent2);
        min-height: 30px;
    }
    #quiz-timer-bar {
        height: 10px;
        background: rgba(255,255,255,0.1);
        border-radius: 5px;
        overflow: hidden;
    }
    #quiz-timer-progress {
        display: block;
        height: 100%;
        width: 100%;
        background: linear-gradient(90deg, #3b82f6, #10b981); 
        transition: width 1s linear;
    }
    @keyframes pulse-correct {
        0% { transform: scale(1); }
        50% { transform: scale(1.03); }
        100% { transform: scale(1); }
    }


  </style>
</head>
<body>
  <div class="totem" id="totem">
    <div class="visual">
      
      <!-- Barra de cabe√ßalho fixa -->
      <div class="header-bar">
        <div class="logo">
          <div class="mark">SE</div>
          <div class="text">SUPERMERCADO ESCOLA</div>
        </div>
        <div class="muted-small" id="current-time-display" style="font-size: 16px; color: rgba(255,255,255,0.7);">--:--</div>
      </div>

      <!-- √Årea de Conte√∫do Rotativo -->
      <div class="content-area" id="content-area">
        
        <!-- 1. Conte√∫do de Promo√ß√µes (Produtos) -->
        <div id="products-area" class="active">
          <!-- Slots de produto ser√£o injetados aqui via JS -->
          
          <!-- Elementos de Produto (Um placeholder) -->
          <div class="product" id="product-p1" style="display: none;">
            <div class="imgwrap"><img src="" alt="" loading="lazy"></div>
            <div class="meta">
              <div class="tag"></div>
              <h2></h2>
              <p class="desc"></p>
              <div class="price">
                <div class="new"></div>
                <div class="old"></div>
              </div>
            </div>
          </div>
          <!-- Fim Placeholder -->

        </div>

        <!-- 2. Ecr√£ Full QR Code -->
        <div id="qr-full" class="qr-card">
          <div class="qr-wrap">
            <div class="qr-title">üéÆ Participe da <strong>Copa Sabor</strong></div>
            <div class="qr-sub">Escaneie ou clique para entrar no jogo e ganhar pr√™mios!</div>
            <img id="qr-full-img" src="" alt="QR Code Copa Sabor" />
            <button class="action-button primary-button" onclick="showLoginModal()">Ler QR Code</button>
            <div class="muted-small">V√°lido para clientes ‚Äî clique ou abra a c√¢mera do celular.</div>
          </div>
        </div>
        
        <!-- 3. Game Dashboard (Ap√≥s Login) -->
        <div id="game-dashboard" style="display: none;">
            <div class="dashboard-tabs">
                <!-- Bot√µes de aba estilizados como secondary-button -->
                <button class="tab-button active" onclick="switchTab('profile')"><i class="fas fa-id-card"></i> Meu Perfil & Ranking</button>
                <button class="tab-button" onclick="switchTab('rewards')"><i class="fas fa-trophy"></i> Pr√™mios</button>
                <!-- Bot√£o Sair - j√° usa secondary-button -->
                <button class="action-button secondary-button" style="margin-left: auto;" onclick="handleGameLogout()"><i class="fas fa-sign-out-alt"></i> Sair</button>
            </div>

            <div class="tab-content-wrapper">
                
                <!-- Conte√∫do Perfil e Ranking (Aba 1) -->
                <div id="tab-profile-content" class="tab-content active">
                    <div class="user-profile">
                        <i class="fas fa-user-circle profile-icon"></i>
                        <h3 class="text-3xl font-bold mt-4 mb-2" id="dashboard-username">Bem-vindo, {Nome do Usu√°rio}</h3>
                        <p class="text-lg text-gray-400 mb-4" id="dashboard-cpf">CPF: ***.***.***-**</p>
                        
                        <div class="text-lg font-semibold text-gray-300">Seus Pontos Acumulados:</div>
                        <div class="points-display" id="dashboard-points">0</div>

                        <div class="reward-card">
                            <i class="fas fa-gift"></i> &nbsp; Pr√≥xima Recompensa: Cupom de 10% OFF!
                        </div>
                        
                        <button class="action-button play-button mt-10" onclick="handleGameStart()">
                            <i class="fas fa-gamepad"></i> &nbsp; Jogar Agora
                        </button>
                    </div>
                    
                    <div class="ranking-card">
                        <h3 class="text-3xl font-bold mb-4 text-center"><i class="fas fa-chart-bar"></i> Ranking Semanal</h3>
                        <ul class="ranking-list" id="ranking-list">
                          <!-- Ranking injetado aqui -->
                        </ul>
                        <div class="muted-small text-center mt-4">Pontua√ß√£o reinicia toda segunda-feira.</div>
                    </div>
                </div>

                <!-- Conte√∫do Pr√™mios (Aba 2) -->
                <div id="tab-rewards-content" class="tab-content">
                    <!-- Pr√™mios injetados aqui -->
                </div>

            </div>
        </div>

        <!-- 4. Quiz Game (Novo Ecr√£) -->
        <div id="quiz-game" style="display: none;">
            <div class="quiz-header">
                <span id="quiz-score-display">Pontos: 0</span>
                <span id="quiz-question-number">Pergunta 1 de 5</span>
            </div>

            <div class="quiz-question-area flex flex-col justify-center">
                <h3 id="quiz-question-text"></h3>
                <div id="quiz-timer-bar">
                    <span id="quiz-timer-progress"></span>
                </div>
            </div>

            <div class="quiz-options-grid" id="quiz-options-container">
                <!-- Bot√µes de op√ß√£o ser√£o injetados aqui -->
            </div>
            
            <div class="quiz-feedback" id="quiz-feedback-text"></div>
        </div>

      </div>

      <!-- Barra de Progresso no rodap√© -->
      <div class="w-full h-2 absolute bottom-0 left-0 right-0 bg-transparent overflow-hidden">
        <div class="progress" title="Tempo restante" style="height:10px; background: rgba(255,255,255,0.03); border-radius:0;">
          <i id="progressBar" style="display:block;height:100%;width:0%;background: linear-gradient(90deg,var(--accent2),var(--accent1));transition: width 0.4s linear;"></i>
        </div>
      </div>
      
      <div class="pause-indicator" title="Pausado" style="position:absolute; top: 12px; right: 12px; background: rgba(0,0,0,0.35); padding:8px 12px; border-radius:999px; font-size:13px; display:flex; gap:8px; align-items:center; color:#fff; opacity:0; transform:translateY(-6px); transition: all 220ms ease; pointer-events:none;">
        ‚è∏Ô∏è Pausado
      </div>

    </div>
  </div>

  <!-- Modal de Login/Cadastro -->
  <div id="login-modal" class="modal-overlay">
    <div class="modal-content">
      <h3 class="text-2xl font-bold mb-4 text-center">Aceder ao Copa Sabor</h3>
      <p class="text-gray-400 mb-6 text-center">Utilize seu CPF para entrar ou criar cadastro.</p>
      
      <input type="text" id="cpf-input" placeholder="Seu CPF (apenas n√∫meros)" maxlength="14" oninput="formatCPF(this)" />
      
      <button class="action-button primary-button w-full mb-3" onclick="handleLogin('login')">
          Entrar / Criar Cadastro
      </button>
      <button class="action-button secondary-button w-full" onclick="hideLoginModal()">
          Cancelar e Sair
      </button>
    </div>
  </div>

  <script>
    // Configuration
    const DISPLAY_MS = 4000; // 4 seconds
    const PRODUCTS_BEFORE_QR = 3;
    const QR_LINK = 'https://copasabor.com.br';
    const QR_SERVICE = (data, size=400) =>
      `https://api.qrserver.com/v1/create-qr-code/?size=${size}x${size}&data=${encodeURIComponent(data)}`;
    
    // Dados de exemplo
    const products = [
      { id: 'p1', name: 'Arroz Tipo 1 ‚Äî 5kg', tag: 'Economize', desc: 'Arroz branco polido, cozimento perfeito. Promo√ß√£o por tempo limitado.', priceNew: '19,90', priceOld: '29,90', img: 'https://images.pexels.com/photos/4110254/pexels-photo-4110254.jpeg' },
      { id: 'p2', name: 'Leite integral', tag: 'Popular', desc: 'Leite integral UHT', priceNew: '4,99', priceOld: '6,99', img: 'https://images.pexels.com/photos/236010/pexels-photo-236010.jpeg' },
      { id: 'p3', name: 'Caf√© Torrado 500g', tag: 'Popular', desc: 'Sabor encorpado, moagem ideal para coador e caf√© expresso.', priceNew: '12,50', priceOld: '18,50', img: 'https://images.unsplash.com/photo-1509042239860-f550ce710b93?auto=format&fit=crop&w=1200&q=70' },
      { id: 'p4', name: 'Cerveja Gelada ‚Äî 350ml (6un)', tag: 'Combo', desc: 'Pack 6 latas ‚Äî refrescante e com desconto exclusivo.', priceNew: '24,90', priceOld: '39,90', img: 'https://images.pexels.com/photos/681847/pexels-photo-681847.jpeg' }
    ];
    
    const rankingData = [
        { rank: 1, name: "Maria S.", points: 5200 },
        { rank: 2, name: "Jo√£o V.", points: 4850 },
        { rank: 3, name: "Ana P.", points: 3900 },
        { rank: 4, name: "Carlos M.", points: 3100 },
        { rank: 5, name: "Laura A.", points: 2750 },
    ];
    
    const ufvQuizData = [
        {
            question: "Em quantos campi a Universidade Federal de Vi√ßosa (UFV) oferece cursos de gradua√ß√£o?",
            options: ["Um (Vi√ßosa)", "Dois (Vi√ßosa e Florestal)", "Tr√™s (Vi√ßosa, Florestal e Rio Parana√≠ba)", "Quatro (Vi√ßosa, Florestal, Rio Parana√≠ba e Muria√©)"],
            correctIndex: 2
        },
        {
            question: "Qual foi o nome original da institui√ß√£o que deu origem √† UFV, fundada na d√©cada de 1920?",
            options: ["Instituto Federal de Minas Gerais", "Escola Superior de Agricultura e Veterin√°ria (ESAV)", "Col√©gio Agr√≠cola de Vi√ßosa (CAV)", "Universidade Rural do Estado de Minas Gerais (Uremg)"],
            correctIndex: 1
        },
        {
            question: "Qual √© a principal forma de ingresso para a maioria dos cursos de gradua√ß√£o da UFV?",
            options: ["Vestibular pr√≥prio", "Processo Seletivo Seriado (PASES)", "Sistema de Sele√ß√£o Unificada (Sisu)", "Transfer√™ncia Externa"],
            correctIndex: 2
        },
        {
            question: "Qual o nome do Col√©gio de Aplica√ß√£o da UFV amplamente reconhecido pela qualidade do Ensino M√©dio?",
            options: ["CAp-Coluni", "Col√©gio Universit√°rio de Vi√ßosa (CUV)", "Col√©gio T√©cnico de Vi√ßosa (CTEV)", "Col√©gio de Aplica√ß√£o Jo√£o XXIII"],
            correctIndex: 0
        },
        {
            question: "De acordo com o Ranking Universit√°rio Folha (RUF) de 2024, em qual posi√ß√£o (aproximada) a UFV se encontrava entre as universidades brasileiras?",
            options: ["5¬™ Posi√ß√£o", "15¬™ Posi√ß√£o", "25¬™ Posi√ß√£o", "35¬™ Posi√ß√£o"],
            correctIndex: 1
        }
    ];

    // Dados de pr√™mios da UFV (CUSTOMIZADO)
    // CORRIGIDO: Certificando-se de que a estrutura e o uso de v√≠rgulas est√£o corretos.
    const rewardData = [
        { id: 'r1', icon: 'fas fa-percent', name: 'Vale Desconto 10%', cost: 1200, desc: 'Cupom de 10% de desconto para sua pr√≥xima compra no Supermercado Escola.' },
        { id: 'r2', icon: 'fas fa-book-open', name: 'Livro da UFV', cost: 1800, desc: 'Publica√ß√£o exclusiva da Editora UFV ou um livro did√°tico popular.' },
        { id: 'r3', icon: 'fas fa-mug-hot', name: 'Caneca UFV', cost: 2500, desc: 'Caneca personalizada do campus de Vi√ßosa.' },
        { id: 'r4', icon: 'fas fa-tshirt', name: 'Camisa UFV', cost: 4500, desc: 'Camisa exclusiva de moletom ou atl√©tica da UFV.' },
        { id: 'r5', icon: 'fas fa-utensils', name: 'P√£o de Queijo + Caf√©', cost: 800, desc: 'Voucher para um P√£o de Queijo e um Caf√© na Cantina central.' },
        { id: 'r6', icon: 'fas fa-hamburger', name: 'Vale Almo√ßo RU', cost: 1500, desc: 'Voucher para uma refei√ß√£o completa no Supermercado Escola.' }
    ];

    // Elements
    const contentArea = document.getElementById('content-area');
    const productsArea = document.getElementById('products-area');
    const qrFull = document.getElementById('qr-full');
    const progressBar = document.getElementById('progressBar');
    const qrFullImg = document.getElementById('qr-full-img');
    const totem = document.getElementById('totem');
    const loginModal = document.getElementById('login-modal');
    const gameDashboard = document.getElementById('game-dashboard');
    const dashboardUsername = document.getElementById('dashboard-username');
    const dashboardCpf = document.getElementById('dashboard-cpf');
    const dashboardPoints = document.getElementById('dashboard-points');
    const rankingList = document.getElementById('ranking-list');
    const tabProfileContent = document.getElementById('tab-profile-content');
    const tabRewardsContent = document.getElementById('tab-rewards-content');
    
    // Quiz Elements
    const quizGame = document.getElementById('quiz-game');
    const quizScoreDisplay = document.getElementById('quiz-score-display');
    const quizQuestionNumber = document.getElementById('quiz-question-number');
    const quizQuestionText = document.getElementById('quiz-question-text');
    const quizOptionsContainer = document.getElementById('quiz-options-container');
    const quizFeedbackText = document.getElementById('quiz-feedback-text');
    const quizTimerProgress = document.getElementById('quiz-timer-progress');
    
    // State
    let currentIndex = 0;
    let shownSinceLastQR = 0;
    let intervalId = null;
    let progressStart = null;
    let paused = false;
    let currentUserData = null; // Dados do usu√°rio logado
    let currentContentId = 'products-area'; // Conte√∫do ativo atualmente
    
    // Quiz State
    let quizCurrentScore = 0;
    let quizCurrentQuestionIndex = 0;
    let quizStartTime = 0;
    let quizTimerInterval = null;
    const QUIZ_MAX_TIME = 10; // Segundos
    const OPTION_LETTERS = ['A', 'B', 'C', 'D', 'E']; // Novas letras de op√ß√£o

    // --- Fun√ß√µes de Ajuda ---

    // Gerencia a troca de abas no dashboard
    function switchTab(tabName) {
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        document.querySelector(`.tab-button[onclick*='${tabName}']`).classList.add('active');
        
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        
        if (tabName === 'profile') {
            tabProfileContent.classList.add('active');
        } else if (tabName === 'rewards') {
            tabRewardsContent.classList.add('active');
            renderRewards(); // Renderiza a lista de pr√™mios ao abrir a aba
        }
    }

    // Fun√ß√£o para mostrar ou esconder o modal
    function showLoginModal() {
        pauseRotation();
        loginModal.classList.add('active');
        document.getElementById('cpf-input').value = ''; // Limpar CPF
    }

    function hideLoginModal() {
        loginModal.classList.remove('active');
        // A rota√ß√£o √© retomada quando o usu√°rio clica em "Sair" do dashboard, n√£o aqui.
        if (currentContentId === 'products-area' || currentContentId === 'qr-full') {
            resumeRotation();
        }
    }

    // M√°scara de CPF
    function formatCPF(input) {
        let value = input.value.replace(/\D/g, ''); // Remove tudo que n√£o √© d√≠gito
        value = value.replace(/(\d{3})(\d)/, '$1.$2'); // Coloca ponto ap√≥s o 3¬∫ d√≠gito
        value = value.replace(/(\d{3})(\d)/, '$1.$2'); // Coloca ponto ap√≥s o 6¬∫ d√≠gito
        value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2'); // Coloca h√≠fen antes dos 2 √∫ltimos d√≠gitos
        input.value = value;
    }

    // Simula√ß√£o de login/cadastro
    function handleLogin() {
        const cpf = document.getElementById('cpf-input').value.replace(/\D/g, '');
        if (cpf.length !== 11) {
            alert("Por favor, insira um CPF v√°lido com 11 d√≠gitos.");
            return;
        }

        // Simula√ß√£o de autentica√ß√£o/cria√ß√£o de usu√°rio
        hideLoginModal();
        
        // Simula dados do usu√°rio com base no CPF (para consist√™ncia)
        const nameHash = cpf.substring(0, 3); 
        const randomName = (parseInt(nameHash) % 2 === 0) ? "Convidado Fiel" : "Aventureiro(a)";

        currentUserData = {
            name: randomName, 
            cpf: cpf,
            points: Math.floor(Math.random() * 5000) + 1000 // Pontos aleat√≥rios
        };
        
        showGameDashboard(currentUserData);
    }
    
    // Inicia o Quiz!
    function handleGameStart() {
        startQuiz();
    }

    // Simula√ß√£o de logout/sa√≠da do jogo
    function handleGameLogout() {
        currentUserData = null;
        showContent('products-area', true); // For√ßa o ecr√£ de produto e reinicia o ciclo
    }
    
    // --- Fun√ß√µes de Conte√∫do (ShowContent e Dashboard) ---

    // Fun√ß√£o central para gerenciar qual ecr√£ est√° ativo
    function showContent(id, forceRestartTimer = false) {
        const targetElement = document.getElementById(id);
        
        if (!targetElement) {
            console.error(`Elemento com ID '${id}' n√£o encontrado.`);
            return;
        }

        // 1. Esconde todos os conte√∫dos
        document.querySelectorAll('.content-area > div').forEach(el => {
            el.classList.remove('active');
            // Oculta o dashboard se n√£o for o ativo
            if(el.id === 'game-dashboard' || el.id === 'quiz-game') el.style.display = 'none'; 
        });

        // 2. Mostra o conte√∫do alvo
        targetElement.style.display = 'flex'; // Garante que o dashboard/quiz apare√ßa
        targetElement.classList.add('active');
        currentContentId = id;

        // 3. Gerencia o temporizador
        if (id === 'products-area' || id === 'qr-full') {
            if (forceRestartTimer) {
                resetProgress();
                startRotation();
            }
        } else {
            pauseRotation();
        }
    }
    
    // Gerar o HTML para o dashboard
    function showGameDashboard(userData) {
        pauseRotation(); 
        
        // 1. Preencher dados do usu√°rio
        dashboardUsername.textContent = `Bem-vindo(a), ${userData.name}`;
        dashboardCpf.textContent = `CPF: ${userData.cpf.slice(0, 3)}.${userData.cpf.slice(3, 6)}.***-**`;
        
        // Simula√ß√£o de contagem de pontos
        dashboardPoints.textContent = '0';
        // CORRIGIDO: Adicionando verifica√ß√£o para garantir que o animatePoints s√≥ seja chamado se o elemento existir
        if (dashboardPoints) { 
            setTimeout(() => {
                animatePoints(userData.points);
            }, 100);
        }

        // 2. Preencher o ranking
        renderRanking(userData);
        
        // 3. Exibir o ecr√£ do dashboard e ir para a aba Perfil
        showContent('game-dashboard');
        switchTab('profile'); // For√ßa a aba perfil no in√≠cio
    }

    function renderRanking(userData) {
        let list = [...rankingData];
        let userRank = list.find(r => r.name === userData.name);
        
        if (!userRank) {
            list.push({ rank: 6, name: userData.name, points: userData.points, isUser: true });
            list.sort((a, b) => b.points - a.points);
            list.forEach((item, index) => item.rank = index + 1);
            if (list.length > 6) list.pop(); 
            userRank = list.find(r => r.name === userData.name);
        }

        rankingList.innerHTML = list.map(item => `
            <li class="ranking-item ${item.name === userData.name ? 'is-user' : ''}">
                <span>#${item.rank} ${item.name === userData.name ? 'Voc√™' : item.name}</span>
                <span class="font-mono text-white">${item.points.toLocaleString('pt-BR')} pts</span>
            </li>
        `).join('');
    }

    function renderRewards() {
        tabRewardsContent.innerHTML = rewardData.map(reward => {
            const isRedeemable = currentUserData && currentUserData.points >= reward.cost;
            const buttonClass = isRedeemable ? 'redeem-btn' : 'redeem-btn disabled';
            const buttonText = isRedeemable ? 'Resgatar' : `Faltam ${(reward.cost - currentUserData.points).toLocaleString('pt-BR')} pts`;
            const onClickAction = isRedeemable ? `redeemReward('${reward.id}', ${reward.cost})` : ``;

            return `
                <div class="reward-item">
                    <div class="reward-icon-box">
                       <i class="${reward.icon}"></i>
                    </div>
                    <h4>${reward.name}</h4>
                    <p>${reward.desc}</p>
                    <div class="reward-cost">${reward.cost.toLocaleString('pt-BR')} pontos</div>
                    <button class="action-button ${buttonClass}" onclick="${onClickAction}">
                        ${buttonText}
                    </button>
                </div>
            `;
        }).join('');
    }

    function redeemReward(rewardId, cost) {
        if (!currentUserData || currentUserData.points < cost) {
            alert("Voc√™ n√£o tem pontos suficientes para este pr√™mio.");
            return;
        }

        const reward = rewardData.find(r => r.id === rewardId);
        if (reward) {
            currentUserData.points -= cost;
            // Atualiza os pontos na tela
            animatePoints(currentUserData.points);
            renderRewards(); // Re-renderiza para atualizar o estado dos bot√µes
            
            // Exibe o voucher
            alert(`‚úÖ RESGATADO! Voc√™ trocou ${cost} pontos por: ${reward.name}.\n\nSeu c√≥digo de voucher √©: ${currentUserData.cpf.slice(-4)}-${rewardId.toUpperCase()}-${Math.floor(Math.random() * 900) + 100}.\n\nApresente este c√≥digo no caixa!`);
        }
    }
    
    // Anima√ß√£o de contagem de pontos (simulado)
    function animatePoints(targetPoints) {
        let current = 0;
        const duration = 500; 
        const stepTime = 10;
        const totalSteps = duration / stepTime;
        const increment = targetPoints / totalSteps;

        const timer = setInterval(() => {
            current += increment;
            if (current >= targetPoints) {
                clearInterval(timer);
                current = targetPoints;
            }
            dashboardPoints.textContent = Math.floor(current).toLocaleString('pt-BR');
        }, stepTime);
    }
    
    // --- Fun√ß√µes do Quiz ---

    function startQuiz() {
        quizCurrentScore = 0;
        quizCurrentQuestionIndex = 0;
        quizScoreDisplay.textContent = `Pontos: 0`;
        loadQuestion();
        showContent('quiz-game');
    }

    function loadQuestion() {
        clearInterval(quizTimerInterval); 
        quizFeedbackText.textContent = ''; 
        quizOptionsContainer.innerHTML = ''; 
        
        if (quizCurrentQuestionIndex >= ufvQuizData.length) {
            endQuiz();
            return;
        }

        const qData = ufvQuizData[quizCurrentQuestionIndex];
        
        quizQuestionNumber.textContent = `Pergunta ${quizCurrentQuestionIndex + 1} de ${ufvQuizData.length}`;
        quizQuestionText.textContent = qData.question;
        
        // Monta os bot√µes de op√ß√£o (AGORA COM A, B, C...)
        qData.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'option-button';
            button.innerHTML = `<span class="option-prefix">${OPTION_LETTERS[index]}</span> ${option}`;
            button.onclick = () => checkAnswer(index, button);
            quizOptionsContainer.appendChild(button);
        });

        // Inicia o cron√¥metro
        quizStartTime = performance.now();
        startQuizTimer();
    }

    function startQuizTimer() {
        let timeLeft = QUIZ_MAX_TIME;
        quizTimerProgress.style.width = '100%';
        quizTimerProgress.style.transition = `width ${QUIZ_MAX_TIME}s linear`;
        
        // For√ßa o rein√≠cio da transi√ß√£o de largura para o efeito de "enchimento"
        setTimeout(() => {
            quizTimerProgress.style.width = '0%';
        }, 50);

        quizTimerInterval = setInterval(() => {
            timeLeft--;
            if (timeLeft <= 0) {
                clearInterval(quizTimerInterval);
                checkAnswer(-1); // Resposta incorreta por tempo esgotado
            }
        }, 1000);
    }

    function checkAnswer(selectedIndex, selectedButton) {
        clearInterval(quizTimerInterval); 
        
        const qData = ufvQuizData[quizCurrentQuestionIndex];
        const isCorrect = selectedIndex === qData.correctIndex;
        let pointsEarned = 0;

        // Desabilita todos os bot√µes ap√≥s a resposta
        document.querySelectorAll('.option-button').forEach(btn => {
            btn.onclick = null;
            btn.style.pointerEvents = 'none';
        });

        if (isCorrect) {
            const timeElapsed = (performance.now() - quizStartTime) / 1000;
            
            // Pontua√ß√£o Din√¢mica: 100 Base + B√¥nus (Max 100)
            const timeBonusFactor = Math.max(0, 1 - (timeElapsed / QUIZ_MAX_TIME)); // 1.0 a 0.0
            const bonusPoints = Math.round(100 * timeBonusFactor);
            pointsEarned = 100 + bonusPoints;

            quizCurrentScore += pointsEarned;
            quizFeedbackText.textContent = `‚úÖ Correto! Voc√™ ganhou ${pointsEarned} pontos. (B√¥nus de Tempo: +${bonusPoints})`;
            
            // Marca a resposta correta e a selecionada
            selectedButton.classList.add('correct-answer');
        } else {
            quizFeedbackText.textContent = `‚ùå Incorreto. A resposta correta √©: ${qData.options[qData.correctIndex]}`;
            if(selectedButton) selectedButton.classList.add('incorrect-answer');
            
            // Marca a correta com destaque (se n√£o for o timeout)
            if (selectedIndex !== -1) {
                document.querySelectorAll('.option-button')[qData.correctIndex].classList.add('correct-answer');
            }
        }
        
        quizScoreDisplay.textContent = `Pontos: ${quizCurrentScore}`;

        // Vai para a pr√≥xima pergunta ap√≥s um pequeno delay
        setTimeout(() => {
            quizCurrentQuestionIndex++;
            loadQuestion();
        }, 2500);
    }
    
    function endQuiz() {
        // 1. Atualiza a pontua√ß√£o do usu√°rio no dashboard
        if (currentUserData) {
            currentUserData.points += quizCurrentScore;
            
            // Reabre o Dashboard com os novos pontos
            showGameDashboard(currentUserData);
            
            // Exibe uma mensagem de sucesso no modal
            alert(`Parab√©ns, ${currentUserData.name}! Voc√™ concluiu o Quiz!\nPontos do Quiz: ${quizCurrentScore.toLocaleString('pt-BR')} \nTotal Acumulado: ${currentUserData.points.toLocaleString('pt-BR')}`);
        } else {
            // Se por algum motivo o currentUserData for null
            showContent('products-area', true);
            alert(`Fim do Quiz! Voc√™ fez ${quizCurrentScore.toLocaleString('pt-BR')} pontos.`);
        }
    }

    // --- Fun√ß√µes de Rota√ß√£o de Conte√∫do ---

    // Injeta os produtos na √°rea de exibi√ß√£o
    function injectProducts() {
        productsArea.innerHTML = '';
        products.forEach((p, idx) => {
            const wrap = document.createElement('div');
            wrap.className = 'product';
            wrap.id = 'product-' + p.id;
            wrap.innerHTML = `
                <div class="imgwrap"><img src="${p.img}" alt="${p.name}" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/600x600/CCCCCC/000000?text=IMAGEM+N√ÉO+DISPON√çVEL';"></div>
                <div class="meta">
                    <div class="tag">${p.tag}</div>
                    <h2>${p.name}</h2>
                    <p class="desc">${p.desc}</p>
                    <div class="price">
                        <span class="currency">R$</span>
                        <div class="new">${p.priceNew}</div>
                        <div class="old">R$ ${p.priceOld}</div>
                    </div>
                </div>
            `;
            productsArea.appendChild(wrap);
        });
    }

    // Oculta todos os elementos de produto
    function hideAllProducts() {
      document.querySelectorAll('#products-area .product').forEach(el => {
        el.classList.remove('active');
        el.style.display = 'none';
      });
    }

    // Exibe um produto espec√≠fico
    function showProduct(index) {
        hideAllProducts();
        const id = 'product-' + products[index].id;
        const el = document.getElementById(id);
        if (el) {
            el.style.display = 'flex';
            el.classList.add('active');
        }
        showContent('products-area');
    }

    // L√≥gica de rota√ß√£o executada a cada DISPLAY_MS
    function rotateTick() {
        if (paused || currentContentId !== 'products-area' && currentContentId !== 'qr-full') return;
        
        // Verifica se √© hora de mostrar o QR Code
        if (shownSinceLastQR >= PRODUCTS_BEFORE_QR) {
            // Mostrar QR Code
            showContent('qr-full');
            shownSinceLastQR = 0; // Reinicia o contador para o pr√≥ximo ciclo
        } else {
            // Mostrar o pr√≥ximo produto
            showProduct(currentIndex);
            shownSinceLastQR++;
            currentIndex = (currentIndex + 1) % products.length;
        }
        
        resetProgress(); // Reinicia a barra de progresso ap√≥s a troca
    }

    // --- Fun√ß√µes de Temporiza√ß√£o e Progress√£o ---

    function resetProgress() {
        progressStart = performance.now();
        progressBar.style.width = '0%';
        if (!intervalId) requestAnimationFrame(animateProgress);
    }
    
    function animateProgress(ts) {
        if (paused || currentContentId !== 'products-area' && currentContentId !== 'qr-full') {
            progressStart = null; // Para a anima√ß√£o do progresso
            return;
        }

        if (!progressStart) progressStart = ts;
        const elapsed = ts - progressStart;
        const pct = Math.min( (elapsed / DISPLAY_MS) * 100, 100 );
        progressBar.style.width = pct + '%';
        
        if (pct < 100) {
            requestAnimationFrame(animateProgress);
        } else {
            // Se o progresso terminar, o rotateTick ser√° chamado pelo setInterval
        }
    }

    function startRotation() {
        if (intervalId) return; // J√° est√° rodando

        // Inicia com o primeiro produto/QR
        rotateTick(); 
        
        // Configura o intervalo para as pr√≥ximas rota√ß√µes
        intervalId = setInterval(rotateTick, DISPLAY_MS);
        
        // Inicia a anima√ß√£o da barra de progresso
        requestAnimationFrame(animateProgress);
    }

    function pauseRotation() {
        if (!intervalId) return;
        clearInterval(intervalId);
        intervalId = null;
        paused = true;
        totem.classList.add('paused');
    }

    function resumeRotation() {
        paused = false;
        totem.classList.remove('paused');
        // Garante que a rota√ß√£o recomece imediatamente no pr√≥ximo item
        rotateTick(); 
        startRotation();
    }
    
    function updateCurrentTime() {
        const now = new Date();
        const timeOptions = { hour: '2-digit', minute: '2-digit', hour12: false };
        document.getElementById('current-time-display').textContent = now.toLocaleTimeString('pt-BR', timeOptions);
    }

    // --- Inicializa√ß√£o ---
    document.addEventListener('DOMContentLoaded', () => {
        // Prepara as imagens do QR Code
        qrFullImg.src = QR_SERVICE(QR_LINK, 400);

        // Injeta os elementos de produto no DOM
        injectProducts();
        
        // Inicia a rota√ß√£o de conte√∫do
        startRotation();
        
        // Configura a hora
        updateCurrentTime();
        setInterval(updateCurrentTime, 60000); // Atualiza a cada minuto
        
        // Adiciona eventos de pausa ao passar o mouse
        totem.addEventListener('mouseenter', pauseRotation);
        totem.addEventListener('mouseleave', resumeRotation);
    });

    // Garante que a rota√ß√£o pare se o modal de login estiver ativo
    loginModal.addEventListener('transitionend', () => {
        if (loginModal.classList.contains('active')) {
            pauseRotation();
        }
    });

    // Limpeza no descarregamento
    window.addEventListener('beforeunload', pauseRotation);

    // Inicializa√ß√£o final: oculta todos, depois inicia a rota√ß√£o que ativa o primeiro item
    document.querySelectorAll('.content-area > div').forEach(el => el.classList.remove('active'));
  </script>
</body>
</html>